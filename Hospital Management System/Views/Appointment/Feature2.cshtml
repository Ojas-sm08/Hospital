@{
    ViewData["Title"] = "Doctor Slot Viewer";
    var doctors = ViewBag.Doctors as List<string>;
    var slots = ViewBag.Slots as List<string>;
    var selectedDoctor = ViewBag.SelectedDoctor as string;
    var selectedDate = ViewBag.SelectedDate as string;
    var error = ViewBag.Error as string;
}

<h2 class="mb-4">🗓️ Doctor Slot Availability</h2>

<form asp-action="Feature2" method="post" class="row g-3 mb-4">
    <div class="col-md-5">
        <label class="form-label">Select Doctor</label>
        <select name="doctorName" class="form-select" required>
            @Html.Raw($"<option disabled {(string.IsNullOrEmpty(selectedDoctor) ? "selected" : "")}>Select a Doctor</option>")
            @foreach (var doc in doctors)
            {
                var selected = doc == selectedDoctor ? "selected" : "";
                @Html.Raw($"<option value=\"{doc}\" {selected}>{doc}</option>")
            }
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">Select Date</label>
        <input type="date" name="date" value="@selectedDate" class="form-control" required />
    </div>

    <div class="col-md-auto d-flex align-items-end">
        <button type="submit" class="btn btn-outline-primary">Check Availability</button>
    </div>
</form>

@if (!string.IsNullOrEmpty(error))
{
    <div class="alert alert-danger">@error</div>
}
else if (slots != null)
{
    <h5>Available Slots for <strong>@selectedDoctor</strong> on <strong>@DateTime.Parse(selectedDate).ToString("dddd, dd MMM yyyy")</strong>:</h5>
    @if (slots.Any())
    {
        <ul class="list-group">
            @foreach (var time in slots)
            {
                <li class="list-group-item">@time</li>
            }
        </ul>
    }
    else
    {
        <div class="alert alert-warning">No available slots.</div>
    }
}
